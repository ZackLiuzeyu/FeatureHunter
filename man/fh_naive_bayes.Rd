% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fh_naive_bayes.R
\name{fh_naive_bayes}
\alias{fh_naive_bayes}
\title{Naive Bayes (with Auto Threshold on B) and Collector Output}
\usage{
fh_naive_bayes(
  train_exp,
  train_labels,
  test_exp,
  labels_list,
  cutoff = c(0.25, 0.5, 0.75),
  auto_th_method = "auto",
  auto_imbalance_thresh = 0.35,
  auto_pr_vs_roc_gate = 0.5,
  collector = collector
)
}
\arguments{
\item{train_exp}{Training expression matrix (rows = samples, columns = features).}

\item{train_labels}{Training labels (0/1 or a binary factor/coercible to 0/1).}

\item{test_exp}{A list of external sets: the 1st element is validation set B,
the rest are C/D/….}

\item{labels_list}{A list of label data.frames aligned with datasets
(A = \code{[[1]]}, B = \code{[[2]]}, …; column 1 = ID, column 2 = label).}

\item{cutoff}{Fixed cutoff grid; will be merged with the auto-selected
threshold on B. Default: \code{c(0.25, 0.5, 0.75)}.}

\item{auto_th_method}{Method for auto thresholding (passed to \code{choose_threshold}):
\code{"youden"} / \code{"f1"} / \code{"auto"} (default \code{"auto"}).
With \code{"auto"}, \code{decide_threshold_method()} is used to pick
the strategy based on class imbalance and PR vs ROC performance.}

\item{auto_imbalance_thresh}{Imbalance threshold for \code{decide_threshold_method()} (default 0.35).}

\item{auto_pr_vs_roc_gate}{PR-vs-ROC advantage ratio gate for
\code{decide_threshold_method()} (default 0.5).}

\item{collector}{(Optional) environment. If supplied, each cutoff’s results
are written into it via \code{.fh_collect()}.}
}
\value{
\code{invisible(list(acc=..., recall=..., fs=..., summary=..., collector=...))}
Local copies of metrics/results (and the \code{collector} if provided).
}
\description{
Trains a Naive Bayes classifier (Laplace smoothing), selects a threshold on
validation set B (optionally auto-deciding the strategy), merges it with a
fixed cutoff grid, and evaluates A/B/C/D… datasets to compute ACC/RECALL/F1.
Results can be written into a provided \code{collector} environment and are also
accumulated into the returned lists.
}
\examples{
\dontrun{
# suppose you prepared train/test objects and a collector env()
collector <- new.env(parent = emptyenv())
fh_naive_bayes(
  train_exp    = train_exp,
  train_labels = train_labels,
  test_exp     = list(exp_list[[2]], exp_list[[3]], exp_list[[4]]),  # B/C/D
  labels_list  = labels_list,
  cutoff       = c(0.25, 0.5, 0.75),
  collector    = collector
)
}
}
