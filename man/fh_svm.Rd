% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fh_svm.R
\name{fh_svm}
\alias{fh_svm}
\title{Support Vector Machine (e1071) Interface}
\usage{
fh_svm(
  train_exp,
  train_labels,
  test_exp,
  labels_list,
  kernel_all = c("linear", "polynomial", "radial"),
  cutoff = c(0.25, 0.5, 0.75),
  auto_th_method = "auto",
  auto_imbalance_thresh = 0.35,
  auto_pr_vs_roc_gate = 0.5,
  collector = collector
)
}
\arguments{
\item{train_exp}{data.frame; training expression matrix (samples × features).}

\item{train_labels}{vector; training labels (0/1 or convertible to 0/1; coerced to factor for training).}

\item{test_exp}{list; external datasets (first = validation B, then C/D/…).}

\item{labels_list}{list; label data.frames (A=1, B=2, …; first column = ID, second = label).}

\item{kernel_all}{character; kernels to use (default \code{c("linear","polynomial","radial")}).}

\item{cutoff}{numeric; fixed thresholds (default \code{c(0.25, 0.5, 0.75)}), merged with the auto threshold from B.}

\item{auto_th_method}{character; \code{"youden"} / \code{"f1"} / \code{"auto"} (default \code{"auto"}).
With \code{"auto"}, \code{decide_threshold_method()} is used based on class imbalance and PR-vs-ROC gain.}

\item{auto_imbalance_thresh}{numeric; imbalance threshold for \code{decide_threshold_method()} (default \code{0.35}).}

\item{auto_pr_vs_roc_gate}{numeric; PR-vs-ROC advantage ratio gate for \code{decide_threshold_method()} (default \code{0.5}).}

\item{collector}{environment (optional); if supplied, each cutoff’s results are appended via \code{.fh_collect()}.}
}
\value{
Collector environment and an invisible list of results (acc, recall, fs, summary).
Specifically, returns \code{invisible(list(acc=..., recall=..., fs=..., summary=...))}.
When \code{collector} is provided, results are also written into it.
}
\description{
Train SVM classifiers with specified kernels (default: "linear", "polynomial", "radial")
using \code{e1071::svm(probability = TRUE)}. On validation set B, choose a threshold
(F1/Youden; supports an automatic policy) and merge it with fixed thresholds
(\code{c(0.25, 0.5, 0.75)}). Evaluate F1 / Accuracy / Recall on datasets A/B/C/D…
Results can be written into a \emph{collector} environment and are also returned
as plain lists.
}
\examples{
\dontrun{
# Prepare a collector once:
collector <- new.env(parent = emptyenv())

fh_svm(
  train_exp    = train_exp,
  train_labels = train_labels,
  test_exp     = list(exp_list[[2]], exp_list[[3]], exp_list[[4]]),  # B / C / D
  labels_list  = labels_list,
  kernel_all   = c("linear","polynomial","radial"),
  cutoff       = c(0.25, 0.5, 0.75),
  auto_th_method = "auto",
  collector    = collector
)

# Convert the collector to simple lists if needed:
res_lists <- fh_as_lists(collector)
}

}
