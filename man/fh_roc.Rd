% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fh_roc.R
\name{fh_roc}
\alias{fh_roc}
\title{Export model names & batch-save per-model/per-dataset result CSVs and ROC PDFs}
\usage{
fh_roc(
  all_result_summary,
  filtered_models_csv_in = file.path("heatmap", "filtered_Accuracy_ordered_models.csv"),
  top_n = 6,
  skip_first = TRUE,
  namesroc = NULL,
  out_dir = getwd(),
  out_modelnames_csv = "modelnames.csv",
  out_dir_roc = "roc",
  out_dir_result = "result",
  heatmapcolor = NULL
)
}
\arguments{
\item{all_result_summary}{list
Global list of evaluation outputs. Each entry corresponds to a model name,
with a list of per-dataset data.frames (each should contain \code{predict_result}
and \code{real_label}; if \code{predict_p} exists it will be used for ROC).}

\item{filtered_models_csv_in}{character
Ranking CSV (no header, first column = model names). The function selects top \code{top_n}.
Default: \code{"filtered_Accuracy_ordered_models.csv"}.}

\item{top_n}{integer
Number of top models to take. Your original used \code{raw[[1]][2:7]} (skip first row),
which is kept by setting \code{skip_first=TRUE}. Default: \code{6}.}

\item{skip_first}{logical
Whether to skip the first row of the ranking CSV (to match \code{2:7}). Default: \code{TRUE}.}

\item{namesroc}{character(NULL)
Optional dataset names used for filenames. If \code{NULL}, try \code{names(resulti)},
otherwise fall back to \code{"Dataset1"}, \code{"Dataset2"}, ...}

\item{out_dir}{character
Base output directory. All files and subfolders will be created under this path.
Default: \code{getwd()}.}

\item{out_modelnames_csv}{character
Output filename (relative to \code{out_dir}) for all model names. Default: \code{"modelnames.csv"}.}

\item{out_dir_roc}{character
Subdirectory name (under \code{out_dir}) for ROC PDFs. Default: \code{"roc"}.}

\item{out_dir_result}{character
Subdirectory name (under \code{out_dir}) for per-dataset result CSVs. Default: \code{"result"}.}

\item{heatmapcolor}{character(NULL)
Not used in this function (kept only for signature consistency).}
}
\value{
invisible(list)
Returns a list with \code{models_written} (vector of written model names) and
\code{selected_models} (top N selected from ranking file).
}
\description{
This function does two things:
(1) Exports \emph{all} model names (from \code{all_result_summary}) to a CSV;
(2) Reads the ranking file \code{filtered_Accuracy_ordered_models.csv}, takes the top-N models,
then for each selected model and each dataset, writes the result CSV and draws a ROC
curve (via \strong{pROC}). Score column is detected from common names (e.g., \code{predict_p});
if not found, it falls back to binarized \code{predict_result}.

All outputs are written under a user-configurable base directory \code{out_dir}
(by default, the user's current working directory). Result CSVs go to
\code{file.path(out_dir, out_dir_result, ...)} and ROC PDFs go to
\code{file.path(out_dir, out_dir_roc, ...)}. The file with all model names is
written to \code{file.path(out_dir, out_modelnames_csv)}.
}
\details{
\strong{Column conventions}
\itemize{
\item Candidate probability/score columns: \code{predict_p}, \code{predict_prob}, \code{prob}, \code{pred_prob}, \code{score},
\code{pred_score}, \code{prob_positive}, \code{p1} (matched in this order).
\item If none found, falls back to \code{predict_result} (mapped to 0/1).
\item True labels should be in \code{real_label}, standardized to 0/1.
}

\strong{Filenames}
\itemize{
\item Use \code{model_name_dataset_name} (whitespace/punctuation replaced by \verb{_}).
Results are saved as \code{file.path(out_dir, out_dir_result, "xxx_result.csv")}
and \code{file.path(out_dir, out_dir_roc, "xxx_roc.pdf")}.
}
}
