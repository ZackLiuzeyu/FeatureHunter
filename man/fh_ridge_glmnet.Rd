% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fh_ridge_glmnet.R
\name{fh_ridge_glmnet}
\alias{fh_ridge_glmnet}
\title{Ridge Regression (cv.glmnet) Interface}
\usage{
fh_ridge_glmnet(
  train_exp,
  train_labels,
  test_exp,
  labels_list,
  fold = 10,
  cutoff = c(0.25, 0.5, 0.75),
  auto_th_method = "auto",
  auto_imbalance_thresh = 0.35,
  auto_pr_vs_roc_gate = 0.5,
  collector = collector
)
}
\arguments{
\item{train_exp}{Training expression matrix (samples × features).}

\item{train_labels}{Training labels (0/1 or convertible to 0/1).}

\item{test_exp}{A list where the first element is validation set B, others are C/D/….}

\item{labels_list}{List of label data.frames (A=1, B=2, …; first two columns = ID and label).}

\item{fold}{Number of CV folds passed to \code{cv.glmnet} and used in result keys.}

\item{cutoff}{Numeric vector of baseline thresholds (default \code{c(0.25, 0.5, 0.75)});
merged with the auto-selected threshold from B.}

\item{auto_th_method}{Threshold method: \code{"youden"} / \code{"f1"} / \code{"auto"} (default).
With \code{"auto"}, \code{decide_threshold_method()} is used to choose based on class
imbalance and PR-vs-ROC advantage.}

\item{auto_imbalance_thresh}{Imbalance threshold passed to \code{decide_threshold_method()} (default 0.35).}

\item{auto_pr_vs_roc_gate}{PR-vs-ROC advantage ratio gate for \code{decide_threshold_method()} (default 0.5).}

\item{collector}{Optional environment to collect results. If supplied, each cutoff’s
results are written into it via internal \code{.fh_collect()}.}
}
\value{
A \code{collector} environment (if supplied) with fields
\code{all_result_summary}, \code{all_result_acc}, \code{all_result_recall}, \code{all_result_FS};
and, invisibly, a list of per-cutoff results with elements
\code{acc}, \code{recall}, \code{fs}, \code{summary}.
Use \code{fh_as_lists(collector)} to convert the environment to plain lists.
}
\description{
Ridge classification using \code{glmnet::cv.glmnet(alpha = 0)}. The model is
tuned on the training set to obtain \code{lambda.min}. A decision threshold
is determined on validation set B and merged with fixed thresholds. Finally,
performance (F1/ACC/RECALL) is computed on datasets A/B/C/D….
}
\examples{
\dontrun{
# Prepare a collector
collector <- new.env(parent = emptyenv())

out <- fh_ridge_glmnet(
  train_exp    = train_exp,
  train_labels = train_labels,
  test_exp     = list(exp_list[[2]], exp_list[[3]], exp_list[[4]]),  # B/C/D
  labels_list  = labels_list,
  fold         = 10,
  collector    = collector
)

# Convert environment to plain lists if needed
lst <- fh_as_lists(collector)
str(lst$all_result_acc)
}

}
