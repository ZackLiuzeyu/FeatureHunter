% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fh_svm.R
\name{fh_svm_best}
\alias{fh_svm_best}
\title{Optimal Support Vector Machine (SVM, CV best) Interface}
\usage{
fh_svm_best(
  train_exp,
  train_labels,
  test_exp,
  labels_list,
  fold = 10,
  lassogene,
  kernel_all = c("linear", "polynomial", "radial"),
  cutoff = c(0.25, 0.5, 0.75),
  auto_th_method = "auto",
  auto_imbalance_thresh = 0.35,
  auto_pr_vs_roc_gate = 0.5,
  collector = collector
)
}
\arguments{
\item{train_exp}{data.frame. Training expression matrix (samples × features).}

\item{train_labels}{vector. Training labels (0/1 or convertible to 0/1).}

\item{test_exp}{list. External datasets (first = validation B, then C/D/…).}

\item{labels_list}{list. Label data.frames (A=1, B=2, …; first col = ID, second col = label).}

\item{fold}{integer. Number of CV folds (used in caret and stored in result keys).}

\item{lassogene}{character. LASSO-selected feature names (used in Part A).}

\item{kernel_all}{character. Kernels to iterate (default \code{c("linear","polynomial","radial")}).}

\item{cutoff}{numeric. Fixed thresholds (default \code{c(0.25, 0.5, 0.75)}), merged with auto thresholds from B.}

\item{auto_th_method}{character; \code{"youden"} / \code{"f1"} / \code{"auto"} (default \code{"auto"}).
With \code{"auto"}, \code{decide_threshold_method()} is used based on class imbalance and PR-vs-ROC gain.}

\item{auto_imbalance_thresh}{numeric; imbalance threshold for \code{decide_threshold_method()} (default \code{0.35}).}

\item{auto_pr_vs_roc_gate}{numeric; PR-vs-ROC advantage ratio gate for \code{decide_threshold_method()} (default \code{0.5}).}

\item{collector}{environment (optional). If provided, results are written into it via \code{.fh_collect(...)}.}
}
\value{
Writes to the \code{collector} environment (if provided) and invisibly returns a
list of results with four elements: \code{acc}, \code{recall}, \code{fs}, and \code{summary}.
Each element is a named list keyed by the constructed model tag.
}
\description{
Implements two parts:
\itemize{
\item \strong{Part A}: Train \code{e1071::svm(probability=TRUE)} on \strong{LASSO-selected features}
for kernels in \code{kernel_all} ("linear", "polynomial", "radial"). On validation set B,
an automatic threshold is chosen (F1/Youden via \code{auto_th_method} decided by
\code{decide_threshold_method}) and merged with fixed thresholds (\code{c(0.25, 0.5, 0.75)}),
then evaluate on A/B/C/D… datasets.
\item \strong{Part B}: Use \code{caret::train} to perform CV-tuning for
\code{svmLinear} / \code{svmRadial} / \code{svmPoly}, following the same
“auto threshold on B + evaluation” workflow.
}

Metrics can be written into a provided collector environment and are also
accumulated locally and returned invisibly.
}
\examples{
\dontrun{
# Prepare containers (collector is optional)
collector <- new.env(parent = emptyenv())

out <- fh_svm_best(
  train_exp    = train_exp,
  train_labels = train_labels,
  test_exp     = list(exp_list[[2]], exp_list[[3]], exp_list[[4]]),  # B / C / D
  labels_list  = labels_list,
  fold         = 10,
  lassogene    = lassogene,
  collector    = collector
)

# Inspect returned results
names(out$acc)
}

}
