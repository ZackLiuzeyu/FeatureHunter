% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fh_plot_model.R
\name{fh_plot_model}
\alias{fh_plot_model}
\title{Pick a ranked model from leaderboard, match in \code{all_result_summary}, and plot}
\usage{
fh_plot_model(
  all_result_summary,
  all_result_FS,
  nshow,
  namesS = c("Accuracy", "Recall", "F-score"),
  score_index = 3,
  pick_index = 1,
  top_models_csv = NULL,
  key_pattern_prefix = "^NN-MLP \\\\(",
  learningratei = NULL,
  batch_sizei = NULL,
  epochselecti = NULL,
  dropoutratei = NULL,
  cutoffi = NULL,
  ds_names = NULL,
  cm_palette_low = "#20ACBD",
  cm_palette_mid = "#FCECCF",
  cm_palette_high = "#F69896",
  base_size = 11
)
}
\arguments{
\item{all_result_summary}{list Nested list of per-model, per-dataset
prediction data.frames. Each dataset data.frame must contain
\code{predict_p}, \code{real_label}, and \code{predict_result}.}

\item{all_result_FS}{list Optional parallel list used only to retrieve
dataset names/order when \code{ds_names} is not supplied.}

\item{nshow}{integer Used to build default leaderboard CSV filename.}

\item{namesS}{character Score names used in default filename construction,
e.g., \code{c("Accuracy","Recall","F-score")}.}

\item{score_index}{integer Which score to use for default filename; e.g.,
\code{1=Accuracy, 2=Recall, 3=F-score}.}

\item{pick_index}{integer 1-based index selecting the ranked row in the
leaderboard CSV (no longer restricted to rows containing "MLP").}

\item{top_models_csv}{character Optional explicit path to leaderboard CSV;
if \code{NULL}, filename is constructed from \code{nshow}, \code{namesS},
and \code{score_index}.}

\item{key_pattern_prefix}{character Regex prefix used only when attempting
to fuzzy-match MLP keys if exact matching fails. Default \code{"^NN-MLP \\("}.}

\item{learningratei, batch_sizei, epochselecti, dropoutratei, cutoffi}{numeric/integer/NULL Manual overrides; if \code{NULL} and the selected
row is MLP, values are parsed from the leaderboard string.}

\item{ds_names}{character Optional dataset name order; if provided, it is
enforced. Otherwise the function tries to reuse names from
\code{all_result_FS[[key]]} when available; otherwise existing names are used.}

\item{cm_palette_low, cm_palette_mid, cm_palette_high}{character Colors for
confusion-matrix heatmap.}

\item{base_size}{numeric Base font size for plots.}
}
\value{
list with elements:
\itemize{
\item key matched model key (string)
\item params parsed/overridden hyperparameters and file info
\item metrics per-dataset confusion matrices + ACC/F1/Recall
\item plots ggplot objects (confusion matrices, PR curves, histograms, density plots)
}
}
\description{
Selects the \code{pick_index}-th row from a leaderboard CSV (by rank),
locates the corresponding key in \code{all_result_summary}, prints
confusion matrices and ACC/F1/Recall, and saves PR curves, probability
histograms, and density plots. If the selected row appears to be an MLP
model (name starts with "NN-MLP ("), the function will also attempt to parse
hyperparameters to help match the key if exact string matching fails.
}
\details{
Exact string matching from leaderboard \code{Model} to
\code{names(all_result_summary)} is attempted first. If it fails and the
selected name appears to be an MLP, hyperparameters are parsed to narrow
candidates by regex. PR curves are saved to \code{pr_plots/}; histograms and
density plots to \code{prob_plots/}; confusion matrices to \code{confusion_matrix/}.
}
\examples{
\dontrun{
# pick the 1st ranked row (any model type), F-score leaderboard:
out <- fh_plot_model(
  all_result_summary = all_result_summary,
  all_result_FS      = all_result_FS,
  nshow        = 40,
  namesS       = c("Accuracy","Recall","F-score"),
  score_index  = 3,
  pick_index   = 1,
  cm_palette_low  = "#20ACBD",
  cm_palette_mid  = "#FCECCF",
  cm_palette_high = "#F69896",
  base_size = 11
)
out$key
out$metrics$`DatasetB(Val)`$acc

# pick the 7th row explicitly from a given CSV:
out2 <- fh_plot_model(
  all_result_summary = all_result_summary,
  all_result_FS      = all_result_FS,
  top_models_csv = "heatmap/40_top_F-score_models.csv",
  pick_index   = 7
)
}
}
