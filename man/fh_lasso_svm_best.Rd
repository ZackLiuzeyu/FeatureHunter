% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fh_svm.R
\name{fh_lasso_svm_best}
\alias{fh_lasso_svm_best}
\title{LASSO + Optimal SVM Interface (caret CV, threshold on B)}
\usage{
fh_lasso_svm_best(
  train_exp,
  train_labels,
  test_exp,
  labels_list,
  fold = 10,
  lassogene,
  cutoff = c(0.25, 0.5, 0.75),
  auto_th_method = "auto",
  auto_imbalance_thresh = 0.35,
  auto_pr_vs_roc_gate = 0.5,
  collector = collector
)
}
\arguments{
\item{train_exp}{data.frame; training expression matrix (samples x features).}

\item{train_labels}{vector; training labels (0/1 or convertible to 0/1).}

\item{test_exp}{list; external datasets (first = validation set B, then C/D/...).}

\item{labels_list}{list; label data.frames (A=1, B=2, ...; first col = ID, second = label).}

\item{fold}{integer; number of CV folds for caret (tagged in result keys, default 10).}

\item{lassogene}{character; feature names selected by LASSO.}

\item{cutoff}{numeric; fixed thresholds merged with the auto threshold from B
(default \code{c(0.25, 0.5, 0.75)}).}

\item{auto_th_method}{character; \code{"youden"} / \code{"f1"} / \code{"auto"} (default \code{"auto"}).
With \code{"auto"}, \code{decide_threshold_method()} is used based on class imbalance and PR-vs-ROC gain.}

\item{auto_imbalance_thresh}{numeric; imbalance threshold for \code{decide_threshold_method()} (default \code{0.35}).}

\item{auto_pr_vs_roc_gate}{numeric; PR-vs-ROC advantage ratio gate for \code{decide_threshold_method()} (default \code{0.5}).}

\item{collector}{environment or NULL; optional results collector. If supplied,
\code{.fh_collect(collector, key, acc=..., recall=..., fs=..., summary=...)} is called.}
}
\value{
Collector environment (if provided) is updated, and the function also returns
an \strong{invisible list} of per-key results:
\verb{list(acc = <named numeric>, recall = <named numeric>, fs = <named numeric>, summary = <named lists>)}.
}
\description{
Train optimal SVM models on the LASSO-selected feature subset (\code{lassogene}).
Uses caret cross-validation (svmLinear / svmRadial / svmPoly), chooses an
automatic threshold on validation set B (F1 or Youden), merges it with fixed
thresholds, evaluates on datasets A/B/C/D..., and records results.
}
\examples{
\dontrun{
# Minimal example (with a collector):
collector <- new.env(parent = emptyenv())
out <- fh_lasso_svm_best(
  train_exp    = train_exp,
  train_labels = train_labels,
  test_exp     = list(exp_list[[2]], exp_list[[3]], exp_list[[4]]),  # B / C / D
  labels_list  = labels_list,
  fold         = 10,
  lassogene    = lassogene,
  collector    = collector
)
}

}
