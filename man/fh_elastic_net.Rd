% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fh_elastic_net.R
\name{fh_elastic_net}
\alias{fh_elastic_net}
\title{Elastic Net interface (cv.glmnet)}
\usage{
fh_elastic_net(
  train_exp,
  train_labels,
  test_exp,
  labels_list,
  fold = 10,
  alpha_all = seq(0.1, 0.9, 0.1),
  cutoff = c(0.25, 0.5, 0.75),
  auto_th_method = "auto",
  auto_imbalance_thresh = 0.35,
  auto_pr_vs_roc_gate = 0.5,
  collector = NULL
)
}
\arguments{
\item{train_exp}{Training expression matrix (rows = samples, cols = features).}

\item{train_labels}{Training labels (0/1 or convertible to 0/1).}

\item{test_exp}{A list: first element = validation set B, others = C/D/.}

\item{labels_list}{List of label data.frames (A=1, B=2, ; first two columns = ID and label).}

\item{fold}{Number of folds for CV (passed to \code{cv.glmnet}; also recorded in result keys). Default: 10.}

\item{alpha_all}{Sequence of alpha values to search. Default: \code{seq(0.1, 0.9, 0.1)}.}

\item{cutoff}{Fixed cutoff set merged with the auto threshold from B. Default: \code{c(0.25, 0.5, 0.75)}.}

\item{auto_th_method}{Auto threshold method: \code{"youden"} / \code{"f1"} / \code{"auto"}. With \code{"auto"},
\code{decide_threshold_method()} is used to pick between F1 and Youden based on class imbalance
and PR-vs-ROC performance; otherwise the specified method is used. Default: \code{"auto"}.}

\item{auto_imbalance_thresh}{Imbalance threshold passed to \code{decide_threshold_method()} (default 0.35).}

\item{auto_pr_vs_roc_gate}{PR-vs-ROC advantage ratio gate for \code{decide_threshold_method()} (default 0.5).}

\item{collector}{(optional) environment used as a result collector. If supplied, each cutoff
results are written into it via \code{.fh_collect()}.}
}
\value{
A \code{collector} environment containing four fields (\code{all_result_summary}, \code{all_result_acc},
\code{all_result_recall}, \code{all_result_FS}) \strong{and} an invisible list with the same four
sub-lists (\code{acc}, \code{recall}, \code{fs}, \code{summary}) accumulated for this call. Use
\code{fh_as_lists(collector)} to convert the environment into plain R lists.
}
\description{
Fits Elastic Net models over a set of \code{alpha} values (default 0.1.9) via
\code{glmnet::cv.glmnet}, extracts \code{lambda.min}, selects an automatic threshold on
validation set B (F1/Youden or auto), merges it with fixed cutoffs, and evaluates
F1/ACC/RECALL on datasets A/B/C/D.
}
\examples{
\dontrun{
# Prepare a collector
collector <- new.env(parent = emptyenv())

fh_elastic_net(
  train_exp    = train_exp,
  train_labels = train_labels,
  test_exp     = list(exp_list[[2]], exp_list[[3]], exp_list[[4]]),  # B / C / D
  labels_list  = labels_list,
  fold         = 10,
  alpha_all    = c(0.1, 0.5, 0.9),
  cutoff       = c(0.25, 0.5, 0.75),
  auto_th_method = "auto",
  auto_imbalance_thresh = 0.35,
  auto_pr_vs_roc_gate   = 0.5,
  collector    = collector
)

# Convert to plain lists if needed:
lists <- fh_as_lists(collector)
}

}
